@model List<ActivityDto>
@using CineTrack.Shared.DTOs

@{
	ViewData["Title"] = "Ana Sayfa";
}

<div class="container py-4">

	@if (Context.Session.GetString("token") == null)
	{
		<div class="text-center py-5">
			<h1 class="display-4 fw-bold mb-3">ğŸ¬ CineTrack</h1>
			<p class="lead text-muted mb-4">Filmleri ve kitaplarÄ± keÅŸfet, topluluÄŸun ne dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼nÃ¼ gÃ¶r.</p>
			<div class="d-flex justify-content-center gap-3">
				<a asp-controller="Auth" asp-action="Login" class="btn btn-primary btn-lg px-4 shadow-sm">GiriÅŸ Yap</a>
				<a asp-controller="Auth" asp-action="Register" class="btn btn-outline-dark btn-lg px-4 shadow-sm">KayÄ±t
					Ol</a>
			</div>
		</div>
	}
	else
	{
		<div class="row justify-content-center">
			<div class="col-lg-7 col-md-9">
				<h4 class="mb-4 fw-bold text-secondary">Topluluk AkÄ±ÅŸÄ±</h4>

				<div id="feedContainer" class="d-flex flex-column gap-4">
					@* Ä°lk aÃ§Ä±lÄ±ÅŸta verileri Partial ile basÄ±yoruz *@
					@await Html.PartialAsync("_ActivityList", Model)
				</div>

				@* EÄŸer veri varsa butonu gÃ¶ster *@
				@if (Model != null && Model.Any())
				{
					<div class="text-center mt-4 mb-5">
						<button id="loadMoreBtn" class="btn btn-outline-primary px-4 rounded-pill"
							onclick="loadMoreActivities()">
							<span class="d-flex align-items-center gap-2">
								<span>Daha Fazla GÃ¶ster</span>
								<i class="bi bi-chevron-down"></i>
							</span>
						</button>
					</div>
				}
			</div>
		</div>
	}

	<div class="modal fade" id="commentsModal" tabindex="-1">
		<div class="modal-dialog modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Yorumlar</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
				</div>
				<div class="modal-body">
					<div id="commentsList" class="d-flex flex-column gap-3">
					</div>
				</div>
				<div class="modal-footer">
					<div class="input-group">
						<input type="text" id="commentInput" class="form-control" placeholder="Yorum yaz...">
						<button class="btn btn-primary" onclick="submitComment()">GÃ¶nder</button>
					</div>
				</div>
			</div>
		</div>
	</div>


</div>

@section Scripts {
	<script src="~/js/index.js"></script>
}